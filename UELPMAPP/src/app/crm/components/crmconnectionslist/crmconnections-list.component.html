<block-ui message="Deafult Message"></block-ui>
<div class="container-fluid">
  <div class="row">
      <div class="col-md-12 col-sm-12 padding-null tittlediv">
          <div class="flexrow space-between align-center">
              <h3 class="item-heading"> CRM - Contact Groups  </h3>
              <p>{{TotalSelectedConnections}} -- {{SelectedConnections}}</p>
              <div> 
                <button class="btn btn-save ng-star-inserted" type="button" (click)="ClickNewConnection()">
                    <i class="fa fa-plus" ria-hidden="true" aria-hidden="true"></i> New</button>            

                    <!-- <button class="btn btn-save ng-star-inserted" type="button" (click)="ClickConnectionDetails(1)">
                        <i class="fa fa-outdent" ria-hidden="true" aria-hidden="true"></i> Deails</button>
                    
                    <button class="btn btn-save ng-star-inserted" type="button" (click)="ClickConnectionDetails(2)">
                        <i class="fa fa-outdent" ria-hidden="true" aria-hidden="true"></i> Deails</button> -->
              </div>
          </div>
          <hr style="margin-top: 0px;" />
      </div>
  </div>
  <!-- Filters Section Starts Here -->
<div class="row">

        <div class="filter-section">
            <div class="flexrow space-between showlist">
                <div class="left-search">
                    <input type="text" [(ngModel)]="ConnectionsSearch" #searchInput placeholder="Search Contacts..."
                        (keyup)="ConnectionsSearchChange($event)" class="search-filter">
                    <i class="fa fa-search" aria-hidden="true"></i> 

                    <!-- <button type="button" (click)="resetFilters($event)" class="btn btn-save">
                        <i class="fa fa-check" aria-hidden="true"></i> Reset</button> -->
                </div>
            </div>
        </div>

  <!-- Filters Section Ends Here -->
</div>
<!-- Toolbar Starts Here -->
<div style="display: flex; flex-wrap:wrap;justify-content:end; margin-bottom: 10px;margin-right: 20px;">
   
    <div style="text-align: right; display: flex; align-items: center;" *ngIf="!ShowToolBar">
       Total Records : {{TotalRecords}} &nbsp;
    </div>
     <div *ngIf="ShowToolBar" style="display: flex; flex-wrap:wrap;justify-content:end;" [@fadeInOut]>

        <!-- <button class="btn btn-save ng-star-inserted" type="button" (click)="ClickPrint($event)">
            <i class="fa fa-print" ria-hidden="true" aria-hidden="true"></i> Print</button>

            <button type="button" class="btn btn-save" mat-button [matMenuTriggerFor]="ExportMenu">
            <i class="fa fa-file-export" ria-hidden="true"></i>
            Export</button>

        <mat-menu #ExportMenu="matMenu">
            <button mat-menu-item (click)="ExportToCSV()">
                <i class="fa fa-file-excel-o" ria-hidden="true" aria-hidden="true"></i> CSV
            </button>
            <button mat-menu-item (click)="ExportToExcel()">
                <i class="fa fa-file-excel-o" ria-hidden="true" aria-hidden="true"></i>
                Excel </button>
        
            <button mat-menu-item (click)="ExportToPDF()">
                <i class="fa fa-file-pdf-o" ria-hidden="true" aria-hidden="true"></i> PDF
            </button>
        </mat-menu> -->
            
    </div>
               
    <!-- <button class="btn btn-save ng-star-inserted" type="button" (click)="toggleShowDiv('divA')" >
        <i class="fa fa-search" ria-hidden="true" aria-hidden="true"></i> Search Advance</button>                             -->
                
    <button class="btn btn-save ng-star-inserted" mat-button [matMenuTriggerFor]="ExportMenu">
        <i class="fa fa-file-export" ria-hidden="true" aria-hidden="true"></i>
        Export</button>
    <mat-menu #ExportMenu="matMenu">
        <button mat-menu-item (click)="ExportToCSV($event)">
            <i class="fa fa-file-excel-o" ria-hidden="true" aria-hidden="true"></i> CSV
        </button>
        <button mat-menu-item (click)="ExportToExcel($event)">
            <i class="fa fa-file-excel-o" ria-hidden="true" aria-hidden="true"></i>
            Excel </button>

        <button mat-menu-item (click)="ExportToPDF($event)">
            <i class="fa fa-file-pdf-o" ria-hidden="true" aria-hidden="true"></i> PDF
        </button>
    </mat-menu>
</div>
<!-- Toolbar Ends Here -->
<div class="row">
        <!-- Table Starts Here -->
        <!-- <table class="table">
        <tr >
            <td style="padding: 0px;">
                <table class="listtable">
                    <tr>
                        <th>List Name </th>  
                        <th>List Desc </th>
                    </tr>
                    <tr (click)="onRecordSelected(company)" *ngFor="let list of ConnectionsLists; let i = index;">
                        <td>{{list.ListName}}</td>
                        <td>{{list.ListDesc}} </td>
                    </tr>
                </table>
            </td>
        </tr>
        </table> -->
        <!-- Table Ends Here -->
          <div class="respnsive-table tablescroll p-datatable-wrapper">
            <!-- <p-table #ConnectionsListTable dataKey="ListName" [rowHover]="true" [filterDelay]="0"
                [globalFilterFields]="['ListName', 'ListDesc']" 
                selectionMode="single | multiple"
                [value]="ConnectionsLists" [rows]="this.ConnectionsPagerConfig.RecordsToFetch" 
                [scrollable]="true"
                [scrollHeight]="'calc(100vh - 400px)'" scrollWidth="100%" [virtualRowHeight]="30"
                [virtualScroll]="true" sortMode="multiple" responsiveLayout="scroll"
                [(selection)]="selectedItems"
                (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)"
                (sortFunction)="customSort($event)" [customSort]="true"
                [paginator]="false"
                
                [rowsPerPageOptions]="[5,10,15,25,50,75,100]"> -->
                <p-table #ConnectionsListTable
                [globalFilterFields]="['ListName', 'ListDesc','CreatedDate']" 
                [columns]="ConnectionsListsCols" 
                selectionMode="single | multiple"
                [value]="ConnectionsLists" [rows]="this.ConnectionsPagerConfig.RecordsToFetch"
                [scrollable]="true" [scrollHeight]="'calc(100vh - 400px)'" scrollWidth="100%"
                [virtualRowHeight]="30" [virtualScroll]="true" 
                [(selection)]="selectedItems"
                (sortFunction)="customSort($event)" [customSort]="true"
                responsiveLayout="scroll" [paginator]="false"
                (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)"
                [rowsPerPageOptions]="[5,10,15,25,50,75,100]">
                <ng-template pTemplate="header" let-columns>
                    <tr style="height: 40px;">
                         <!-- <th *ngFor="let col of ConnectionsListsCols;let i=index"
                            [pSortableColumn]="col.field">
                            {{col.header}}
                            <p-sortIcon [hidden]="i==0" *ngIf="i!=ConnectionsListsCols.length-1"
                                [field]="col.field"></p-sortIcon>
                        </th> -->
                        <th style="width: 20px !important;">
                            <p-tableHeaderCheckbox (click)="onRowUnselect($event)">                    
                            </p-tableHeaderCheckbox>
                        </th>
                        <th style="width: 100px;" pSortableColumn="ListName">Name <p-sortIcon field="ListName"></p-sortIcon></th>
                        <th style="width: 200px;" pSortableColumn="ListDesc">Description <p-sortIcon field="ListName"></p-sortIcon></th>
                        <th style="width: 100px;" pSortableColumn="IsActive">Status <p-sortIcon field="IsActive"></p-sortIcon></th>
                        <th style="width: 100px;" pSortableColumn="CreatedDate">Created On <p-sortIcon field="CreatedDate"></p-sortIcon></th>
                        <th style="width: 100px;" pSortableColumn="EmailCount">Email Count <p-sortIcon field="EmailCount"></p-sortIcon></th>
                        <th style="width: 100px;">Action</th>
                    </tr>
                </ng-template>
                <!-- <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                        <col *ngFor="let col of columns" [style.width]="col.width">
                    </colgroup>
                </ng-template> -->
                <ng-template pTemplate="body" let-value let-people let-columns let-i="rowIndex">
                    <tr style="height:30px" [pSelectableRow]="ConnectionsLists">
                        <td style="width: 20px;">
                            <p-tableCheckbox [value]="people"></p-tableCheckbox>
                        </td>
                        <td style="width: 100px;">{{value.ListName}}</td>
                        <td style="width: 200px;">{{value.ListDesc }}</td>
                        <td style="width: 100px;">{{(value.IsActive==true)?'Active':'In Active'  }}</td>
                        <td style="width: 100px;">{{value.CreatedDate | date: 'yyyy-MM-dd'}}</td>
                        <td style="width: 100px;">{{value.EmailCount}}</td>
                        
                        <td class="aligncenter" style="width: 100px;">
                            <button type="button" class="btn" 
                                (click)="ClickConnectionDetails(value.Id)">
                                <i class="fa fa-outdent" ria-hidden="true" aria-hidden="true"></i> Details</button>  
                                &nbsp;&nbsp;

                            <button type="button" class="btn"
                                (click)="RedirectToConnections(value.Id)">
                                <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                            </button>
                        </td>
                    </tr>
    
                </ng-template>
                <ng-template pTemplate="emptymessage" let-columns>
                    <tr>
                        <td [attr.colspan]="ConnectionsLists.length">
                            No records found
                        </td>
                    </tr>
                </ng-template>
                
            </p-table>
          </div>
        <!-- Table Ends Here -->
</div>