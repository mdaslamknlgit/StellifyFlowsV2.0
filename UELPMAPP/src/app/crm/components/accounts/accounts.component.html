<block-ui message="Deafult Message"></block-ui>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-12 col-sm-12 padding-null tittlediv">
      <div class="flexrow space-between align-center">
        <h3 class="item-heading"> CRM - Accounts {{AccountId}} </h3>
        <div>
          <button class="btn btn-save ng-star-inserted" type="button" (click)="ClickBack($event)">
            <i class="fa fa-arrow-left" ria-hidden="true" aria-hidden="true"></i> Back</button>

            <!-- <button class="btn btn-save ng-star-inserted" type="button" (click)="ClickNewContact($event)">
                <i class="fa fa-arrow-left" ria-hidden="true" aria-hidden="true"></i> New Contact</button>

                <button class="btn btn-save ng-star-inserted" type="button" (click)="CliekEditContact($event)">
                    <i class="fa fa-arrow-left" ria-hidden="true" aria-hidden="true"></i> Edit Contact</button> -->
        </div>
      </div>
      <hr style="margin-top: 0px;" />
      <!-- <p>Lead Id : {{LeadInfo.Id}}</p>
        <p>First Name : {{LeadInfo.FirstName}}</p>
        <p>Last Name : {{LeadInfo.LastName}}</p>
        <p>Company Name : {{LeadInfo.CompName}}</p> -->
    </div>
  </div>
 
  <div class="row">
    <div #rightPanel [CustomSpinner]="showLoadingIcon" style='background: white' class="rightPanel1 col-lg-12 col-md-12"
        [class.expand-rightcol]="rightsection">
        <!-- <div class="fullScreenLabel">
            <app-header></app-header>
        </div> -->
        <div>
            <form (ngSubmit)="onSubmit(AccountForm.value,myPanel,$event)" [formGroup]="AccountForm" class="form-horizontal">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group text-right btn-list">
                                <button type="submit" (click)="saveRecord($event)" class="btn btn-save">
                                    <i class="fa fa-check" aria-hidden="true"></i> Save</button>
                
                                <button type="submit" (click)="cancelRecord($event)" class="btn btn-cancel" *ngIf="hideInput">
                                    <i class="fa fa-ban" aria-hidden="true"></i> Cancel</button>
                            </div>
                        </div>
                    </div>
                    <mat-accordion [multi]="true">
                        <mat-expansion-panel [expanded]="true" #myPanel>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    Account Details
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Account Name<i
                                                    class="fa fa-star mandatory-icon" *ngIf="hideInput" aria-hidden="true"></i></label>
                                            <div class="autoComplete col-xl-8 col-sm-6 col-6">
                                                <input id="AccountName" #AccountName formControlName="AccountName" placeholder="First Name" tabindex="1" *ngIf="hideInput"
                                                    class="form-control" required />

                                                    <div *ngIf="AccountForm.get('AccountName') && AccountForm.get('AccountName').errors!=null &&AccountForm.get('AccountName').touched==true">
                                                        <span class="errorMessage" *ngIf="AccountForm.get('AccountName').errors.required">
                                                          Account Name is required</span>
                                                      </div>
                                            </div>

                                        </div>
                                        <div class="form-group row">
                                            <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Other Phone</label>
                                            <div class="col-xl-8 col-sm-6 col-6">
                                                <!-- <label class="col-form-label form-text"
                                                    *ngIf="hideText&&selectedPODetails.Supplier!=null">{{
                                                    selectedPODetails.Supplier.BillingFax }}</label> -->
                                                <input formControlName="OtherPhone" placeholder="Other Phone" onlyNumber tabindex="3" *ngIf="hideInput"
                                                    class="form-control" />
                                            </div>
                                        </div>    
                                        <div class="form-group row">
                                            <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Email</label>
                                            <div class="col-xl-8 col-sm-6 col-6">
                                                <!-- <label class="col-form-label form-text"
                                                 *ngIf="hideText&&selectedPODetails.Supplier!=null"
                                                 style="word-wrap:break-word">{{ selectedPODetails.ContactPersonName }}</label> -->
                                                <input formControlName="EmailId" placeholder="Email" tabindex="6" *ngIf="hideInput"
                                                    class="form-control" />
                                            </div>
                                        </div>  
                                        <div class="form-group row">
                                            <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">No Of Employees</label>
                                            <div class="col-xl-8 col-sm-6 col-6">
                                                <!-- <label class="col-form-label form-text"
                                                    *ngIf="hideText&&selectedPODetails.Supplier!=null">{{
                                                    selectedPODetails.Supplier.BillingFax }}</label> -->
                                                <input formControlName="NoOfEmployees" placeholder="No Of Employees" tabindex="3" *ngIf="hideInput"
                                                    class="form-control" />
                                            </div>
                                        </div>   
                         
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Main Phone. </label>
                                            <div class="col-xl-8 col-sm-6 col-6">
                                                <input type="text" formControlName="MainPhone" onlyNumber tabindex="2" placeholder="Main Phone"
                                                    *ngIf="hideInput" class="form-control">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">
                                                Mobile
                                            </label>
                                            <div class="col-xl-8 col-sm-6 col-6">
                                                <!-- <label class="col-form-label form-text" *ngIf="hideText">
                                                                                                                    {{ selectedPODetails.InventoryRequestId }}</label> -->
                                                <input type="text" formControlName="Mobile" tabindex="4" onlyNumber placeholder="Mobile" maxlength="100"
                                                    *ngIf="hideInput" class="form-control">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Industry</label>
                                            <div class="col-xl-8 col-sm-6 col-6">
                                                <select (change)="OnIndustryChange($event)" formControlName="IndsId" class="form-control">
                                                    <option [ngValue]="undefined">--Select--</option>
                                                    <option *ngFor="let record of IndustryDomainItemList" value={{record.IndsId}}>
                                                        {{ record.IndustryName }}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Website</label>
                                            <div class="col-xl-8 col-sm-6 col-6">
                                                <!-- <label class="col-form-label form-text"
                                                    *ngIf="hideText&&selectedPODetails.Supplier!=null">{{
                                                    selectedPODetails.Supplier.BillingFax }}</label> -->
                                                <input formControlName="Website" placeholder="Website" tabindex="3" *ngIf="hideInput"
                                                    class="form-control" />
                                            </div>
                                        </div>  
                                    </div>
                                
                                </div>
                        </mat-expansion-panel>
                
                        <mat-expansion-panel [expanded]="true">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    <div class="col-md-6">
                                        Contacts Details
                                    </div>
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                            <div class="row">
                                <div class="col-lg-12 col-md-6 col-sm-12" style="text-align: right;padding-bottom:10px;">
                                    <button class="btn btn-save ng-star-inserted" style="margin-right: 20px;" type="button" 
                                    (click)="ClickNewContact($event)">
                                      <i class="fa fa-plus" ria-hidden="true" aria-hidden="true"></i> New</button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <p-table #ContactsListTable [globalFilterFields]="['FirstName','LastName','Mobile','Email','CreatedDate']"
                                        [columns]="ContactsListsCols" selectionMode="single | multiple" [value]="ContactsLists"
                                        [rows]="this.ContactsListsPagerConfig.RecordsToFetch" [scrollable]="true" [scrollHeight]="'calc(100vh - 400px)'"
                                        scrollWidth="100%" [virtualRowHeight]="30" [virtualScroll]="true" [(selection)]="selectedItems"
                                        (sortFunction)="customSort($event)" [customSort]="true" responsiveLayout="scroll" [paginator]="false"
                                        (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)"
                                        [rowsPerPageOptions]="[5,10,15,25,50,75,100]">
                                        <ng-template pTemplate="header" let-columns>
                                            <tr style="height: 40px;">
                                                <th style="width: 36px;">
                                                    <p-tableHeaderCheckbox (click)="onRowUnselect($event)">
                                                    </p-tableHeaderCheckbox>
                                                </th>
                                                <!-- <th *ngFor="let col of ContactsLists;let i=index" style="width: 100px;"
                                                        [pSortableColumn]="col.field">
                                                        {{col.header}}
                                                        <p-sortIcon [hidden]="i==1" *ngIf="i!=ContactsLists.length-1"
                                                            [field]="col.field"></p-sortIcon>
                                                    </th> -->
                                    
                                                <!-- Testing Column Custom Sort -->
                                                <!-- <th pSortableColumn="status">Status<p-sortIcon field="status"></p-sortIcon></th> -->
                                                
                                                <th style="width: 100px;" pSortableColumn="FirstName">First Name <p-sortIcon
                                                        field="FirstName"></p-sortIcon></th>
                                                <th style="width: 100px;" pSortableColumn="LastName">Last Name <p-sortIcon
                                                        field="LastName"></p-sortIcon></th>
                                                <th style="width: 100px;" pSortableColumn="JobTitle">Job Title <p-sortIcon
                                                        field="JobTitle"></p-sortIcon></th>
                                                <th style="width: 100px;" pSortableColumn="Mobile">Mobile <p-sortIcon field="Mobile"></p-sortIcon></th>
                                                <th style="width: 200px;" pSortableColumn="EmailId">Email <p-sortIcon field="EmailId"></p-sortIcon></th>
                                                <th style="width: 100px;" pSortableColumn="Isprimary">Primary <p-sortIcon field="Isprimary"></p-sortIcon></th>
                                    
                                                
                                                <th style="width: 100px;" pSortableColumn="CreatedDate">Created On <p-sortIcon
                                                        field="CreatedDate"></p-sortIcon></th>
                                                <th style="width: 50px;">Action</th>
                                            </tr>
                                        </ng-template>
                                        <!-- <ng-template pTemplate="colgroup" let-columns>
                                                  <colgroup>
                                                      <col *ngFor="let col of columns" [style.width]="col.width">
                                                  </colgroup>
                                              </ng-template> -->
                                        <ng-template pTemplate="body" let-value let-people let-rowData let-columns let-i="rowIndex">
                                            <tr style="height:30px" [pSelectableRow]="ContactsLists">
                                                <td style="width: 36px;">
                                                    <p-tableCheckbox [value]="people"></p-tableCheckbox>
                                                </td>
                                                <td style="width: 100px;">{{value.FirstName}}</td>
                                                <td style="width: 100px;">{{value.LastName}}</td>
                                                <td style="width: 100px;">{{value.JobTitle}}</td>
                                                <td style="width: 100px;">{{value.Mobile }}</td>
                                                <td style="width: 200px;">{{value.EmailId }}</td>
                            <!-- <td>{{(value.WorkFlowStatusId!=workFlowStatus.Draft)?value.PurchaseOrderCode:value.DraftCode}} </td> -->
                                                <td style="width: 100px;">{{(value.Isprimary==true)?'Primary':'Secondary'}}</td>
                                    
                                                <td style="width: 100px;">{{value.CreatedDate | date: 'yyyy-MM-dd'}}</td>
                                                <td style="width: 50PX;" class="aligncenter">
                                                    <button type="button" class="btn" (click)="EditContact(value.Id)">
                                                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                    
                                        </ng-template>
                                        <ng-template pTemplate="emptymessage" let-columns>
                                            <tr>
                                                <td [attr.colspan]="ContactsLists.length">
                                                    No records found
                                                </td>
                                            </tr>
                                        </ng-template>
                                    
                                    </p-table>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    &nbsp;
                                </div>
                            </div> 
                
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>

            </form>
            <p-confirmDialog></p-confirmDialog>
           
        </div>
    </div>
    <!-- left col end here-->
  </div>
</div>
