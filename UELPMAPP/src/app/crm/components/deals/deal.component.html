<block-ui message="Deafult Message"></block-ui>
<div class="container-fluid">
  <!-- <ng-container focusInvalidInput> -->
  <form (ngSubmit)="onSubmit(DealForm.value,myPanel,$event)" [formGroup]="DealForm" #MyDealFormEle
      style="width: 100%;margin-top: 10px">
  <div class="row">
    <div class="col-md-12 col-sm-12 padding-null tittlediv">
      <div class="flexrow space-between align-center">
        <h3 class="item-heading"> CRM - Deal </h3>
        <p *ngIf="IsClose" style="color:red;">Deal is Close You Can't Edit</p>
        <p>{{AccountId}} -- {{ContactId}} == {{ReturnLink}} </p>
        <!-- <p> {{ShowQualify}} -- {{ShowDisQualify}} -- {{disabledselect}} </p> -->
        <!-- <p>{{LeadMode}} -- {{LeadId}} -- {{SelectedLeadSourceId}}</p> -->
        <!-- <p>{{IsSummaryExpand}}  --{{IsDetailsExpand}} --{{ShowQualify}} -- {{IsQualified}} -- {{LeadStatusId}} --{{LeadStatusName}} </p> -->
        <div>
          {{IsDealClose}} -- {{IsDealLost}} == {{DealStageClose}} -- {{DealStageLost}} == {{IsShowSave}}
          <button type="button" id="CloseWonLost" #CloseWonLost  (click)="ClickCloseDeal($event,DealCloseButtonText)" class="btn btn-cancel" *ngIf="DealStageClose">
            <i class="fa fa-ban" aria-hidden="true"></i> {{DealCloseButtonText}}</button>

            &nbsp;&nbsp;&nbsp;&nbsp;

          <button type="submit" class="btn btn-save" [disabled]="IsShowSave">
            <i class="fa fa-check" aria-hidden="true"></i> Save</button>
          
          &nbsp;&nbsp;&nbsp;&nbsp;
          <button type="button" (click)="onCancel($event)" class="btn btn-cancel">
            <i class="fa fa-ban" aria-hidden="true"></i> Cancel</button>

            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <button class="btn btn-save ng-star-inserted" type="button" (click)="ClickBack($event)">
            <i class="fa fa-arrow-left" ria-hidden="true" aria-hidden="true"></i> Back</button>

            &nbsp;&nbsp;
            <button class="btn btn-save ng-star-inserted" type="button" (click)="ClickTest($event)">
              <i class="fa fa-arrow-left" ria-hidden="true" aria-hidden="true"></i> Test</button>
        </div>
      </div>
      <hr style="margin-top: 0px;" />
    </div>
  </div>
  <div class="row">
    <div class="container-fluid">
      <div class="col-md-12 col-sm-12 padding-null tittlediv">
        <div class="flexrow space-between align-center" style="padding-bottom: 10px;justify-content: center;">
          <!-- <button type="button" (click)="ClickQualify($event)" class="btn btn-save" *ngIf="ShowQualify"
            [disabled]="IsQualified">
            <i class="fa fa-badge-check" ria-hidden="true"></i> Qualify</button> -->
            <button type="button" (click)="ClickConvertNew($event)" class="btn btn-save" *ngIf="ShowQualify"
            [disabled]="IsQualified"
            >
            <i class="fa fa-badge-check" ria-hidden="true"></i> Convert </button>
            &nbsp;&nbsp;&nbsp;&nbsp;
            
            <!-- <button type="button" (click)="ClickConvert($event)" class="btn btn-save" *ngIf="ShowQualify"
            [disabled]="IsQualified">
            <i class="fa fa-badge-check" ria-hidden="true"></i> Convert</button> -->
            &nbsp;&nbsp;&nbsp;&nbsp;
            
            <button type="button" (click)="ClickDisQualify($event)" class="btn btn-save" *ngIf="ShowDisQualify"
            [disabled]="IsQualified">
            <i class="fa fa-badge-check" ria-hidden="true"></i>Dis Qualify</button>

            <!-- <button type="button" (click)="ClickConvert($event)" class="btn btn-save" *ngIf="ShowQualify"
            [disabled]="IsQualified">
            <i class="fa fa-badge-check" ria-hidden="true"></i> Convert</button> -->
        </div>
      </div>
    </div>
    <div style="clear: both;"></div>
  </div>
  
  <div class="row">
    <!-- <form (ngSubmit)="onSubmit(DealForm.value,myPanel)" [formGroup]="DealForm" novalidate
      style="width: 100%;margin-top: 10px"> -->
      <div class="container-fluid">
        <mat-accordion [multi]="true">
          <mat-expansion-panel [expanded]="IsSummaryExpand" #myPanel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Deal Information 
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="row">
              <div class="col-md-12">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Deal Name
                  <i class="fa fa-star mandatory-icon" aria-hidden="true"></i></label>
                  <div class="autoComplete col-xl-8 col-sm-6 col-6">
                    <input id="Topic" #DealName formControlName="DealName" placeholder="Deal Name" [readonly]="IsClose" 
                    tabindex="1" class="form-control" required />

                    <div *ngIf="DealForm.get('DealName') && DealForm.get('DealName').errors!=null &&DealForm.get('DealName').touched==true">
                      <span class="errorMessage" *ngIf="DealForm.get('DealName').errors.required">
                        Deal Name is required</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Account
                    <i class="fa fa-star mandatory-icon" aria-hidden="true"></i>
                    
                  </label>
                  <div class="autoComplete col-xl-8 col-sm-6 col-6">
                    <div *ngIf="!IsShowAccount">
                      <label class="form-label">{{AccountName}}</label>
                    </div>
                    <!-- <ng-select   
                    placeholder="Select photo" 
                    [virtualScroll]="true" 
                     [items]="photosBuffer$ | async"
                        bindLabel="title"
                        bindValue="thumbnailUrl"
                    [loading]="loading" 
                    [typeahead]="input$"
                    (scrollToEnd)="fetchMore(select.filterValue)"
                    #select>
                  </ng-select> -->
                    <div *ngIf="IsShowAccount">
                      <ng-select id="NGBAccountId" #NGBAccountId [disabled]="DisabledAccount"
                       [items]="AccountsDomainItemList" bindLabel="AccountName" bindValue="AccountId"                       
                        placeholder="Select Account/Company" 
                        [hideSelected]="true"               
                        [hideSelected]="true"
                        formControlName="AccountId" 
                        (change)="OnAccountSelect($event)" 
                        (open)="OnAccountOpen($event)"
                        (close)="OnAccountClose($event)"
                        >
                        <ng-template ng-header-tmp>
                          Select Account
                        </ng-template>
                        <ng-template ng-label-tmp let-item="item">
                          <!-- <img height="15" width="15" [src]="item.avatar"/> -->
                          <b>{{item.AccountName}}</b> 
                        </ng-template>
                        <ng-template ng-option-tmp let-item="item" let-index="index">
                          <!-- <img height="15" width="15" [src]="item.avatar"/> -->
                          <b>{{item.AccountName}}</b>
                        </ng-template>
                        <ng-template ng-footer-tmp>
                          
                        &nbsp;&nbsp;&nbsp;&nbsp;
                          <button type="button" (click)="ClickNewAccount($event)" class="btn btn-save" [disabled]="IsQualified">
                            <i class="fa fa-plus" ria-hidden="true"></i>New Account</button>
                        </ng-template>
                      </ng-select>
                      <div
                        *ngIf="DealForm.get('AccountId') && DealForm.get('AccountId').errors!=null && DealForm.get('AccountId').touched==true">
                        <span class="errorMessage" *ngIf="DealForm.get('AccountId').errors.required">
                          Account is required</span>
                      </div>
                    </div>
                      <!-- <div class="input-group-append">
                        <button class="btn btn-outline-secondary"
                            (click)="ClickNewAccount($event)" type="button">
                            <i class="fa fa-calendar" style="cursor: pointer;"></i>
                        </button>
                      </div> -->
                  </div>
                </div>
            
              </div>
            </div>


            <div class="row">
              <div class="col-md-12">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Contact
                    <i class="fa fa-star mandatory-icon" aria-hidden="true"></i>
                  </label>
                  <div class="autoComplete col-xl-8 col-sm-6 col-6">
                    <label class="form-label" *ngIf="!IsShowContact">{{ContactName}}</label>
                    <!-- <select id="ContactId" #ContactId (change)="OnContactChange($event)" formControlName="ContactId" 
                    class="form-control" tabindex="3" required>
                      <option [ngValue]="0">--None--</option>
                      <option *ngFor="let list of ContactsAccountDomainItemList" value={{list.ContactId}}>
                        {{ list.ContactName }}
                    </select> -->

                  <div *ngIf="IsShowContact">
                      <ng-select id="NGBContactId" #NGBContactId
                      [items]="ContactsAccountDomainItemList" bindLabel="ContactName" bindValue="ContactId"
                      placeholder="Select Contact" 
                      [hideSelected]="true"                 
                      formControlName="ContactId" 
                      (change)="OnContactSelect($event)" 
                      (open)="OnContactOpen($event)"
                      (close)="OnContactClose($event)"
                      >
                      <ng-template ng-header-tmp>
                        Select Contact
                      </ng-template>
                      <ng-template ng-label-tmp let-item="item">
                        <!-- <img height="15" width="15" [src]="item.avatar"/> -->
                        <b>{{item.ContactName}}</b> 
                      </ng-template>
                      <ng-template ng-option-tmp let-item="item" let-index="index">
                        <!-- <img height="15" width="15" [src]="item.avatar"/> -->
                        <b>{{item.ContactName}}</b>
                      </ng-template>
                      <ng-template ng-footer-tmp>
                        
                      &nbsp;&nbsp;&nbsp;&nbsp;
                        <button type="button" (click)="ClickNewContact($event)" class="btn btn-save" [disabled]="IsQualified">
                          <i class="fa fa-plus" ria-hidden="true"></i>New Contact</button>
                      </ng-template>
                      </ng-select>
                      <div
                        *ngIf="DealForm.get('ContactId') && DealForm.get('ContactId').errors!=null && DealForm.get('ContactId').touched==true">
                        <span class="errorMessage" *ngIf="DealForm.get('ContactId').errors.required">
                          Contact is required</span>
                    </div>
                  </div>

                  </div>
                </div>
              </div>
            </div>

            

            <div class="row">
              <div class="col-md-12">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Deal Type
                  <i class="fa fa-star mandatory-icon" aria-hidden="true"></i></label>
                  <div class="autoComplete col-xl-8 col-sm-6 col-6">
                  
                    <select id="DealTypeId" #DealTypeId (change)="OnDealTypeChange($event)" formControlName="DealTypeId" 
                    class="form-control" tabindex="4" required>
                      <option [ngValue]="0">--None--</option>
                      <option *ngFor="let list of DealTypeList" value={{list.DealTypeId}}>
                        {{ list.DealTypeId }}  --  {{ list.DealTypeName}}
                    </select>

                    <div
                      *ngIf="DealForm.get('DealTypeId') && DealForm.get('DealTypeId').errors!=null && DealForm.get('DealTypeId').touched==true">
                      <span class="errorMessage" *ngIf="DealForm.get('DealTypeId').errors.required">
                        Deal Type is required</span>
                    </div>

                  </div>
                </div>

              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Deal Stage
                  <i class="fa fa-star mandatory-icon" aria-hidden="true"></i></label>
                  <div class="autoComplete col-xl-8 col-sm-6 col-6">
                  
                    <select id="DealStageId" #DealStageId (change)="OnDealStageChange($event)" formControlName="DealStageId" 
                    class="form-control" tabindex="5" required>
                      <option [ngValue]="0">--None--</option>
                      <option *ngFor="let list of DealStageList" value={{list.DealStageId}}>
                        {{ list.DealStageName }}  --  {{ list.DealStageProbability}}
                    </select>

                    <div
                      *ngIf="DealForm.get('DealStageId') && DealForm.get('DealStageId').errors!=null && DealForm.get('DealStageId').touched==true">
                      <span class="errorMessage" *ngIf="DealForm.get('DealStageId').errors.required">
                        Deal Stage is required</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Deal Source -->
            <div class="row">
              <div class="col-md-12">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Deal Source
                  <i class="fa fa-star mandatory-icon" aria-hidden="true"></i></label>
                  <div class="autoComplete col-xl-8 col-sm-6 col-6">
                  
                    <select id="LeadSourceId" #LeadSourceId (change)="OnLeadSourceChange($event)" formControlName="LeadSourceId" 
                    class="form-control" tabindex="6" required>
                      <option [ngValue]="0">--None--</option>
                      <option *ngFor="let list of LeadSourceList" value={{list.LeadSourceId}}>
                        {{ list.SourceName }}
                    </select>

                    <div
                      *ngIf="DealForm.get('LeadSourceId') && DealForm.get('LeadSourceId').errors!=null && DealForm.get('LeadSourceId').touched==true">
                      <span class="errorMessage" *ngIf="DealForm.get('LeadSourceId').errors.required">
                        Deal Stage is required</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Rating -->
            <div class="row">
              <div class="col-md-12">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Rating</label>
                    <div class="autoComplete col-xl-8 col-sm-6 col-6">
                      <select id="RatingId" #RatingId (change)="OnLeadRatingChange($event)" formControlName="RatingId" 
                          class="form-control" tabindex="7">
                            <option [ngValue]="0">--None--</option>
                            <option *ngFor="let list of LeadRatingDomainItems" value={{list.LeadRatingId}}>
                              {{ list.LeadRatingName }}
                          </select>
      
                          <!-- <div
                            *ngIf="DealForm.get('RatingId') && DealForm.get('RatingId').errors!=null && DealForm.get('RatingId').touched==true">
                            <span class="errorMessage" *ngIf="DealForm.get('RatingId').errors.required">
                              Rating is required</span>
                          </div> -->
                    </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Amount
                  <i class="fa fa-star mandatory-icon" aria-hidden="true"></i></label>
                  <div class="autoComplete col-xl-8 col-sm-6 col-6">
                    <input id="Topic" #Amount formControlName="Amount" placeholder="Amount" onlyNumber [readonly]="IsClose" 
                    tabindex="8" class="form-control" required />

                    <div *ngIf="DealForm.get('Amount') && DealForm.get('Amount').errors!=null &&DealForm.get('Amount').touched==true">
                      <span class="errorMessage" *ngIf="DealForm.get('Amount').errors.required">
                        Amount is required</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Closing Date
                  </label>
                  <div class="col-xl-8 col-sm-6 col-6">
                      <div class="input-group">
                          <input id="ClosingDate" #ClosingDate class="form-control" formControlName="ClosingDate"
                              valueDefault={null} [minDate]="ClosingMinDate"
                              [maxDate]="ClosingMaxDate" tabindex="9"
                              (click)="OnClosingDatePickerFocus(ClosingDateDatePicker,$event)"
                              ngbDatepicker #ClosingDateDatePicker="ngbDatepicker">

                          <div class="input-group-append">
                              <button class="btn btn-outline-secondary"
                                  (click)="ClosingDateDatePicker.toggle()" type="button">
                                  <i class="fa fa-calendar" style="cursor: pointer;"></i>
                              </button>
                          </div>

                      </div>
                      <div *ngIf="DealForm.get('ClosingDate') && DealForm.get('ClosingDate').errors!=null &&DealForm.get('ClosingDate').touched==true">
                        <span class="errorMessage" *ngIf="DealForm.get('ClosingDate').errors.required">
                          Closing Date is required</span>
                      </div>
                  </div>
              </div>
              </div>
            </div>





            <div class="row">
              <div class="col-md-6">
                <div class="form-group row">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Created By
                  </label>
                  <div class="autoComplete col-xl-8 col-sm-6 col-6">
                    {{CreatedUser}}
                    <!-- <input formControlName="CreatedBy" placeholder="Created By"  
                     maxlength="15" readonly
                    tabindex="6" class="form-control" /> -->
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group row" *ngIf="!HideAssignedTo">
                  <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Lead Owner
                  </label>
                  <div class="autoComplete col-xl-8 col-sm-6 col-6">
                   <!-- {{AssignedUserId}}  -- {{AssignedUserName}} -->
                    
                    <button class="btn btn-save ng-star-inserted" type="button"  *ngIf="!HideAssignedTo"
                    [disabled]="IsQualified"
                    (click)="SelectReportingManager(OwnerId,$event)">
                      <i class="fa fa-user" ria-hidden="true" aria-hidden="true"></i> Assigned To</button>
                      {{OwnerName}} &nbsp;&nbsp;&nbsp;&nbsp;
                    <!-- <input formControlName="OwnerId" placeholder="Lead Owner"  
                     maxlength="15" readonly
                    tabindex="6" class="form-control" /> -->
                  </div>
                </div>
              </div>
            </div>
            
          </mat-expansion-panel>

          <mat-expansion-panel [expanded]="IsExpandActiviesDetails" *ngIf="FormMode=='EDIT'">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Activities
                </mat-panel-title>

            </mat-expansion-panel-header>
            <div class="row">
                <div class="divnewbutton">  
                      &nbsp;&nbsp;
                      <!-- Activity Menu With Sub Menu Starts Here -->
                      <button type="button" class="btn btn-save ng-star-inserted" style="margin-right: 20px;"
                            [matMenuTriggerFor]="ActivityMenu">
                            <i class="fa fa-plus" ria-hidden="true" aria-hidden="true"></i> New 
                      </button>

                      <mat-menu #ActivityMenu="matMenu">
                        <button mat-menu-item [matMenuTriggerFor]="Call">Phone</button>
                        <button mat-menu-item (click)="ClickNewPhoneActivity(0,3,'Email','NEW',$event);">Email</button>
                        <button mat-menu-item (click)="ClickNewPhoneActivity(0,4,'Appointment','NEW',$event);">Appointment</button>
                      </mat-menu>
                      <mat-menu #Call="matMenu">
                        <button mat-menu-item (click)="ClickNewPhoneActivity(0,1,'Phone','NEW',$event);">Schedule a call</button>
                        <button mat-menu-item (click)="ClickNewPhoneActivity(0,2,'Phone','NEW',$event);">Log a call</button>
                      </mat-menu>

                      <!-- Activity Menu With Sub Menu Ends Here -->
              </div> 
            </div>
                    <!-- Activity Table Starts Here -->
                    <!-- <div class="row"> -->
                    <!-- [scrollHeight]="'calc(100vh - 460px)'" -->
                    <div style="height:300px; overflow:scroll;">
                    <p-table #ActivityListTable
                        [globalFilterFields]="['ActivityTypeName','ActivitySubject','StartDate','EndDate','DueDate']"
                        [columns]="ActivityListsCols" selectionMode="single | multiple" [value]="ActivityLists"
                        [rows]="this.ActivityListsPagerConfig.RecordsToFetch" [scrollHeight]="'300px'"
                        scrollWidth="100%" [virtualRowHeight]="30" [virtualScroll]="true" [(selection)]="selectedItems"
                        (sortFunction)="customSort($event)" [customSort]="true" responsiveLayout="scroll" [paginator]="false"
                        (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)"
                        [rowsPerPageOptions]="[5,10,15,25,50,75,100]">
                        <ng-template pTemplate="header" let-columns>
                            <tr style="height: 40px;">
                                <th style="width: 36px;">
                                    <p-tableHeaderCheckbox (click)="onRowUnselect($event)">
                                    </p-tableHeaderCheckbox>
                                </th>
                                <!-- <th *ngFor="let col of ContactsLists;let i=index" style="width: 100px;"
                                                                                [pSortableColumn]="col.field">
                                                                                {{col.header}}
                                                                                <p-sortIcon [hidden]="i==1" *ngIf="i!=ContactsLists.length-1"
                                                                                    [field]="col.field"></p-sortIcon>
                                                                            </th> -->
                    
                                <!-- Testing Column Custom Sort -->
                                <!-- <th pSortableColumn="status">Status<p-sortIcon field="status"></p-sortIcon></th> -->
                                <th style="width: 100px;" pSortableColumn="ActivityTypeName">Activity Type <p-sortIcon
                                        field="ActivityTypeName"></p-sortIcon></th>
                                <th style="width: 100px;" pSortableColumn="ActivitySubject">Subject <p-sortIcon
                                        field="ActivitySubject"></p-sortIcon></th>
                                <th style="width: 100px;" pSortableColumn="RegardingName">Regarding <p-sortIcon
                                        field="RegardingName"></p-sortIcon></th>
                                <th style="width: 100px;" pSortableColumn="StartDate">Start Date <p-sortIcon field="StartDate"></p-sortIcon>
                                </th>
                                <th style="width: 100px;" pSortableColumn="EndDate">End Date <p-sortIcon field="EndDate"></p-sortIcon></th>
                                <th style="width: 100px;" pSortableColumn="DueDate">Due Date <p-sortIcon field="DueDate"></p-sortIcon></th>
                                <th style="width: 100px;" pSortableColumn="ActivityStatusName">Status <p-sortIcon
                                        field="ActivityStatusName"></p-sortIcon></th>
                    
                                <th style="width: 100px;" pSortableColumn="CreatedDate">Created On <p-sortIcon
                                        field="CreatedDate"></p-sortIcon></th>
                                <th style="width: 50px;">Action</th>
                            </tr>
                        </ng-template>
                        <!-- <ng-template pTemplate="colgroup" let-columns>
                                                                        <colgroup>
                                                                            <col *ngFor="let col of columns" [style.width]="col.width">
                                                                        </colgroup>
                                                                    </ng-template> -->
                        <ng-template pTemplate="body" let-value let-people let-rowData let-columns let-i="rowIndex">
                            <tr style="height:30px" [pSelectableRow]="ActivityLists">
                                <td style="width: 36px;">
                                    <p-tableCheckbox [value]="people"></p-tableCheckbox>
                                </td>
                                <td style="width: 100px;">{{value.ActivityTypeName }}</td>
                                <td style="width: 100px;">{{value.ActivitySubject}}</td>
                                <td style="width: 100px;">{{value.RegardingName}}</td>
                                <td style="width: 100px;">{{value.StartDate}}</td>
                                <td style="width: 100px;">{{value.EndDate }}</td>
                                <td style="width: 100px;">{{value.DueDate }}</td>
                                <!-- {{(value.WorkFlowStatusId!=workFlowStatus.Draft)?value.PurchaseOrderCode:value.DraftCode}} -->
                                <!-- <td style="width: 100px;">{{(value.isClose==true)?'Close':'Open' }}</td> -->
                                <td style="width: 100px;">{{value.ActivityStatusName }}</td>
                                
                    
                                <td style="width: 100px;">{{value.CreatedDate | date: 'yyyy-MM-dd'}}</td>
                                <td style="width: 50PX;" class="aligncenter">
                                    <!-- ClickNewPhoneActivity(0,1,'Phone','NEW',$event) -->
                                    <button type="button" class="btn"
                                        (click)="EditActivity(value.ActivityId,value.ActivityTypeId,value.ActivityTypeName,'EDIT',$event)">
                                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                    </button>
                                </td>
                            </tr>
                    
                        </ng-template>
                        <ng-template pTemplate="emptymessage" let-columns>
                            <tr>
                                <td [attr.colspan]="ActivityLists.length">
                                    No records found
                                </td>
                            </tr>
                        </ng-template>
                    
                    </p-table>
                    </div>
                    <div *ngIf="ActivityLists.length==0">
                        <div class="col-12 error errorMessage">
                            <p class="errorMessage">
                                {{filterMessage}}
                            </p>
                        </div>
                    </div>
                    <div style="clear: both;"></div>
                    <ngb-pagination *ngIf="ActivityLists.length>0" (pageChange)="pageChange($event)" style="z-index: auto;"
                        [collectionSize]="ActivityListsPagerConfig.TotalRecords" class="d-flex justify-content-center"
                        [pageSize]="ActivityListsPagerConfig.RecordsToFetch" [maxSize]="5" [(page)]="currentPage" [boundaryLinks]="true">
                        <ng-template ngbPaginationPages let-page let-pages="pages">
                            10 of 100
                        </ng-template>
                    </ngb-pagination>
                    <br>
                    <br>
                    <!-- </div> -->
                    <!-- Activity Table Ends Here -->
        </mat-expansion-panel>
        </mat-accordion>
        <hr>
        
        <div class="rowgap" layout="row" layout-wrap fxLayout.xs="column" fxLayoutAlign="center"
          style="text-align: center;padding-left: 16px">

          <button type="submit" class="btn btn-save" [disabled]="IsQualified">
            <i class="fa fa-check" aria-hidden="true"></i> Save</button>

            &nbsp;&nbsp;&nbsp;&nbsp;
            <button type="submit" (click)="onCancel($event)" class="btn btn-cancel">
              <i class="fa fa-ban" aria-hidden="true"></i> Cancel</button>

        </div>
        <hr>
        <div style="clear: both;"></div>
        
      </div>
      <div style="clear: both;"></div>
    <!-- </form> -->
  </div>
  </form>
<!-- </ng-container> -->
  
</div>