<div class="container-fluid">
  <div class="row">
    <div class="col-md-12 col-sm-12 padding-null tittlediv">
        <div class="flexrow space-between align-center">
            <h3 class="item-heading"> CRM - Accounts List {{TotalSelectedAccounts}} -- {{SelectedAccounts}} </h3>
            
            <!-- <p> {{SelectedLeads}} -- {{ShowToolBar}}  ---- {{closeResult}} </p> -->
            <div> 
                  <button class="btn btn-save ng-star-inserted" style="margin-right: 20px;" type="button" 
                  (click)="ClickNewAccount($event)">
                    <i class="fa fa-plus" ria-hidden="true" aria-hidden="true"></i> New</button>
            </div>
        </div>
        <hr style="margin-top: 0px;" />
    </div>
  </div>

<!-- Toolbar Starts Here -->
  <div class="row">
 
  </div>
  <!-- Toolbar Ends Here -->
  <div class="row">
    <!-- Filter Section Start Here -->
    <div class="filter-section" style="width: 100%;" ngbDropdown #myDrop="ngbDropdown">
        <form [formGroup]="AccountFilterInfoForm">
            <div class="form-group " style="display: flex; flex-wrap:wrap;justify-content: space-between;">
                <div class="col-sm-12 col-md-12 col-lg-1 mb-1">
                    <label for="Name">Account Name</label>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-2 mb-1">
                    <input type="text" id="AccountName" class="form-control" formControlName="AccountName">
                </div>

                <div class="col-sm-12 col-md-12 col-lg-2 mb-1">
                    <label class="col-form-label  col form-label">Mobile</label>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-2 mb-1">
                    <div class=" input-group" style="width: auto;">
                        <input type="text" #Mobile formControlName="Mobile" placeholder="" class="form-control">
                        
                    </div>
                </div>

                <div class="col-sm-12 col-md-12 col-lg-1 mb-1">
                    <label class="col-form-label  col form-label">Email</label>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-2 mb-1">
                    <div class="  input-group" style="width: auto;">
                        <input type="text" #EmailId formControlName="EmailId" placeholder="" class="form-control">
                    </div>
                </div>

                <div class="col-sm-12 col-md-12 col-lg-2 mb-1">
                    <button type="submit" (click)="FilterData()" class="btn btn-save">
                        <i class="fa fa-check" ria-hidden="true"></i> Apply</button>
                    <button type="submit" (click)="resetFiltersMain($event)" class="btn btn-save">
                        <i class="fa fa-refresh" aria-hidden="true"></i> Reset</button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-5 col-md-5 col-sm-8">
                    <div class="form-group row">
                        <label class="col-form-label col-xl-4 col-sm-6 col-6 form-label">Views
                        <i class="fa fa-star mandatory-icon" aria-hidden="true"></i></label>
                        <div class="autoComplete col-xl-8 col-sm-6 col-6">
                        
                            <select id="ViewId" #ViewId (change)="OnViewChange($event)"  formControlName="ViewId"
                            class="form-control" tabindex="10" required>
                            <option *ngFor="let list of AppViewsList" value={{list.ViewId}}>
                                {{ list.ViewName }}
                            </select>          
       
                        </div>
                    </div>  

                </div>
                <div class="col-lg-7 col-md-7 col-sm-12">
                    <div style="display: flex; flex-wrap:wrap;justify-content:end;">
                        <div>
                            Total Records : {{TotalRecords}} &nbsp;
                            </div>
                        <!-- <button class="btn btn-save ng-star-inserted" type="button" (click)="toggleShowDiv('divA')" >
                            <i class="fa fa-search" ria-hidden="true" aria-hidden="true"></i> Search Advance</button>                             -->
    
                        <button class="btn btn-save ng-star-inserted" mat-button [matMenuTriggerFor]="ExportMenu">
                            <i class="fa fa-file-export" ria-hidden="true" aria-hidden="true"></i>
                            Export</button>
                        <mat-menu #ExportMenu="matMenu">
                            <button mat-menu-item (click)="ExportToCSV()">
                                <i class="fa fa-file-excel-o" ria-hidden="true" aria-hidden="true"></i> CSV
                            </button>
                            <button mat-menu-item (click)="ExportToExcel()">
                                <i class="fa fa-file-excel-o" ria-hidden="true" aria-hidden="true"></i>
                                Excel </button>
            
                            <button mat-menu-item (click)="ExportToPDF()">
                                <i class="fa fa-file-pdf-o" ria-hidden="true" aria-hidden="true"></i> PDF
                            </button>
                        </mat-menu>
                    </div>
                   
                </div>  
            </div>

        </form>
    </div>
    <!-- Filter Section Ends Here -->
  </div>
  <div class="row" style="border:1px solid blue;visibility: hidden;height:0px;">
  </div>
  <div class="row">
    <div class="respnsive-table tablescroll p-datatable-wrapper">
        
    <!-- sortMode="multiple" -->
      <p-table #AccountsListsTable
          [globalFilterFields]="['FirstName','LastName','Mobile','Email','CreatedDate']" 
          [columns]="AccountsLists" selectionMode="single | multiple"
          [value]="AccountsLists" [rows]="this.AccountsListsPagerConfig.RecordsToFetch"
          [scrollable]="true" [scrollHeight]="'calc(100vh - 400px)'" scrollWidth="100%"
          [virtualRowHeight]="30" [virtualScroll]="true" 
          [(selection)]="selectedItems"
          (sortFunction)="customSort($event)" [customSort]="true"
          responsiveLayout="scroll" [paginator]="false"
          (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)"
          [rowsPerPageOptions]="[5,10,15,25,50,75,100]">
          <ng-template pTemplate="header" let-columns>
              <tr style="height: 40px;">
                <th style="width: 36px;">
                    <p-tableHeaderCheckbox (click)="onRowUnselect($event)">                    
                    </p-tableHeaderCheckbox>
                </th>
                <th style="width: 100px;" pSortableColumn="AccountName">Account <p-sortIcon field="AccountName"></p-sortIcon></th>  
                <th style="width: 100px;" pSortableColumn="MainPhone">Main Phone <p-sortIcon field="MainPhone"></p-sortIcon></th>
                <th style="width: 100px;" pSortableColumn="Mobile">Mobile <p-sortIcon field="Mobile"></p-sortIcon></th>         
                <th style="width: 100px;" pSortableColumn="EmailId">Email <p-sortIcon field="EmailId"></p-sortIcon></th>                              
                <th style="width: 100px;" pSortableColumn="CreatedDate">Created On <p-sortIcon field="CreatedDate"></p-sortIcon></th>
                <th style="width: 50px;">Action</th>
              </tr>
          </ng-template>
          <!-- <ng-template pTemplate="colgroup" let-columns>
              <colgroup>
                  <col *ngFor="let col of columns" [style.width]="col.width">
              </colgroup>
          </ng-template> -->
          <ng-template pTemplate="body" let-value let-people let-rowData let-columns let-i="rowIndex">
              <tr style="height:30px" [pSelectableRow]="AccountsLists">
                <td style="width: 36px;">
                    <p-tableCheckbox [value]="people"></p-tableCheckbox>
                </td>
                    <td style="width: 100px;">{{value.AccountName }}</td>  
                    <td style="width: 100px;">{{value.MainPhone}}</td>
                    <td style="width: 100px;">{{value.Mobile}}</td>
                    <td style="width: 100px;">{{value.EmailId }}</td>                  
                    <td style="width: 100px;">{{value.CreatedDate  | date: 'yyyy-MM-dd'}}</td>
                    <td style="width: 50PX;" class="aligncenter">
                        <button type="button" class="btn"
                            (click)="EditAccount(value.Id)">
                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        </button>
                    </td>
              </tr>

          </ng-template>
          <ng-template pTemplate="emptymessage" let-columns>
              <tr>
                  <td [attr.colspan]="AccountsLists.length">
                      No records found
                  </td>
              </tr>
          </ng-template>
      </p-table>
      <div *ngIf="AccountsLists.length==0">
        <div class="col-12 error errorMessage">
            <p class="errorMessage">
                {{filterMessage}}
            </p>
        </div>
    </div>
    <div style="clear: both;"></div>
    <ngb-pagination *ngIf="AccountsLists.length>0" (pageChange)="pageChange($event)" style="z-index: auto;"
        [collectionSize]="AccountsListsPagerConfig.TotalRecords"
        class="d-flex justify-content-center" [pageSize]="AccountsListsPagerConfig.RecordsToFetch"
        [maxSize]="5" [(page)]="currentPage" [boundaryLinks]="true">
        <ng-template ngbPaginationPages let-page let-pages="pages">
            10 of 100
        </ng-template>
    </ngb-pagination>
  </div>
  </div>
</div>

<ng-template #NameTemplate let-r="result" let-t="term">
    <div>
        <span> {{r.Name}}</span>
    </div>
  </ng-template>
<!-- Filter Form Starts Here -->

<!-- Filter Form Ends Here -->
<!-- Modal Dialog Starts Here -->
<!-- <h1>Angular 8 Bootstrap Modal Popup Example</h1>
<button class="btn btn-lg btn-outline-primary" (click)="open(mymodal)">Open My Modal</button>
<ng-template #mymodal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Bootstrap Modal</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">×</span>
        </button>
    </div>

    <div class="modal-body">
        This is example from ItSolutionStuff.com
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Ok</button>
        &nbsp;&nbsp;
        <button (click)="passBack()" type="submit" class="btn btn-primary w-100">Pass back</button>
    </div>
</ng-template> -->
<!-- Modal Dialog Ends Here -->
<ng-template #content let-modal>
	<div class="modal-header">
		<h4 class="modal-title" id="modal-basic-title">Profile update</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="CloseLeadSearch($event,'Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
	</div>
	<div class="modal-body">
		<form [formGroup]="ContactFilterInfoForm">
			<div class="mb-3">
				<label for="dateOfBirth">Date of birth</label>
				<div class="input-group">
                    <label class="col-form-label col form-label">Topic </label>
                    <div class=" autoComplete">
                        <input style="width: 100px;" formControlName="Topic" type="text" class="form-control show" />
                    </div> 
 
					<button class="btn btn-outline-secondary" (click)="dp.toggle()" type="button">
                        <i class="fa fa-calendar" style="cursor: pointer;"></i>
                    </button>
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
        CloseLeadSearch
        <button type="button" class="btn btn-outline-dark" (click)="CloseLeadSearch($event,'Save click')">Save</button>
	</div>
</ng-template>
