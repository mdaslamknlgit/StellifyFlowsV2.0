<div class="container-fluid" ngbDropdown #myDrop="ngbDropdown">
  <div class="row">
    <div class="col-md-6 col-sm-12 padding-null tittlediv">
      <h3 class="item-heading">
     Workflow Re-assignment </h3>
    </div>
    <!-- <div class="col-md-6 col-sm-12 align-text-top" style="text-align:right">
      <img src="../assets/images/grid1.png" (click)="fullScreen()">
      <div ngbDropdown placement="bottom-right" style="padding:0px;" class="d-inline-block">
        <button class="btn btn-outline-primary" style="background:none;border:none;padding:0px;" id="dropdownBasic1"
          ngbDropdownToggle>
          <img src="../assets/images/grid2.png">
        </button>
        <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
          <button class="dropdown-item" (click)="onPDFPreview()">Preview</button>
        </div>
      </div>
    </div> -->

  </div>
  <div #rightPanel class="rightPanel"  [class.expand-rightcol]="rightSection">
  <div class="row">
    <div [CustomSpinner]="showLeftPanelLoadingIcon" class="col-lg-12 col-md-12 enlargeRightPanel">

      <div class="enlargeRightPanelMargin">
        <form [formGroup]="workflowReAssignmentInfoForm" class="form-horizontal" (ngSubmit)="onSubmit()" novalidate>
          <div malihu-scrollbar [scrollbarOptions]="scrollbarOptions" class="rightcol-scrroll"
            (click)="$event.stopPropagation(); myDrop.close();">
            <div class="row fullScreenLabel">
              <div class="col-12">
                <h3 class="item-heading" style="float:none;">Workflow Re-assignment</h3>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group row">
                  <label class="col-form-label col-xl-3 col-sm-6 col-6 form-label">From User
                  </label>
                  <div class="col-xl-6 col-sm-6 col-6">
                    <input formControlName="CurrentApproverUser" (selectItem)="onUserChange($event)" type="text"
                      class="form-control" [inputFormatter]="usersInputFormater" [ngbTypeahead]="searchUsers()"
                      [resultTemplate]="userTemplate"
                      [ngClass]="(validateControl(workflowReAssignmentInfoForm.get('CurrentApproverUser')))?'form-control ng-touched':'form-control'" />
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group row">
                  <label class="col-form-label col-xl-3 col-sm-6 col-6 form-label">To User
                  </label>
                  <div class="col-xl-6 col-sm-6 col-6">
                    <input formControlName="AlternateApproverUser" (selectItem)="onAlternateApproverChange($event)"
                      type="text" class="form-control" [inputFormatter]="usersInputFormater"
                      [ngbTypeahead]="searchApprovers()" [resultTemplate]="userTemplate"
                      [ngClass]="(validateControl(workflowReAssignmentInfoForm.get('AlternateApproverUser')))?'form-control ng-touched':'form-control'" />
                  </div>
                </div>
              </div>
            </div>
            <div class="form-group row">
              <div class="col-12">
                <div [innerHtml]="message" style="color:red; text-align:center"></div>
              </div>
            </div>

            <div class="row" style="margin-top: 20px">
              <div class="col-xl-12">
                <h4 class="form-heading" style="margin-bottom: 10px;">Roles </h4>
              </div>
              <div class="col-xl-12  table-responsive" [ngStyle]="{'max-width.px': screenWidth}">
                <!-- <div *ngIf="workFlowReAssignmentData!=null">
                  <ul>
                      <ng-template ngFor let-data [ngForOf]="workFlowReAssignmentData.UserRoles" let-i="index"> <b     >{{ data.CompanyName   }}</b> --
                       
                    <ng-template ngFor let-data [ngForOf]="workFlowReAssignmentData.UserRoles" let-i="index">
                     
                      <li class="listbox">
                        <span>
                          <span style="color: #01548e;font-weight: bold;">{{ i+1 }} </span> . {{ data.RoleName }}
                        </span>

                      </li>
                    </ng-template>
                     </ng-template>
                  </ul>
                </div>
                <div *ngIf="workFlowReAssignmentData===null">
                  No records are found
                </div> -->
                <p-table [columns]="rolesColumns" sortMode="single" [value]="workFlowReAssignmentData.UserRoles">
                  <ng-template pTemplate="emptymessage">
                    <tr>
                      <td colspan="3" style='text-align: center;'>
                        <b>{{gridNoMessageToDisplay}}</b>
                      </td>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                      <col style="width:10%;">
                      <col style="width:25%;">
                      <col style="width:65%;">
                    </colgroup>
                  </ng-template>
                  <ng-template pTemplate="header" let-columns>
                    <tr>
                      <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                        {{col.header}}
                        <p-sortIcon *ngIf='col.field!="SNo"' [field]="col.field" ariaLabel="Activate to sort"
                          ariaLabelDesc="Activate to sort in descending order"
                          ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                      </th>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-rowData let-i="rowIndex" let-columns="columns">
                    <tr>
                      <td>
                        {{ i + 1 }}
                      </td>
                      <td>
                        {{ rowData.CompanyName }}
                      </td>
                      <td>
                        {{ rowData.RoleName }}
                      </td>
                    </tr>
                  </ng-template>
                </p-table>
              </div>
            </div>

            <div class="row" style="margin-top: 20px">
              <div class="col-xl-12">
                <h4 class="form-heading" style="margin-bottom: 10px;">Workflow Items </h4>
              </div>
              <div class="col-xl-12  table-responsive" [ngStyle]="{'max-width.px': screenWidth}">
                <fieldset formArrayName="WorkflowItems">
                  <p-table [columns]="workItemsGridColumns" sortMode="single"
                    [value]="workflowReAssignmentInfoForm.get('WorkflowItems')['controls']">
                    <ng-template pTemplate="emptymessage">
                      <tr>
                        <td colspan="5" style='text-align: center;'>
                          <b>{{gridNoMessageToDisplay}}</b>
                        </td>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="colgroup" let-columns>
                      <colgroup>
                        <col style="width:10%;">
                        <!-- <col style="width:25%;"> -->
                        <col style="width:25%;">
                        <col style="width:25%;">
                        <col style="width:20%;">
                        <col style="width:20%;">
                      </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                      <tr>
                        <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                          {{col.header}}
                          <p-sortIcon *ngIf='col.field!="SNo"' [field]="col.field" ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                        </th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-i="rowIndex" let-columns="columns">
                      <tr [formGroupName]="i">
                        <td>
                          {{ i + 1 }}
                        </td>
                        <td>
                          {{workflowReAssignmentInfoForm.get('WorkflowItems').controls[i].get('CompanyName').value }}
                        </td>
                        <td>
                          {{workflowReAssignmentInfoForm.get('WorkflowItems').controls[i].get('ProcessName').value }}
                        </td>
                        <td>
                          {{workflowReAssignmentInfoForm.get('WorkflowItems').controls[i].get('DepartmentName').value }}
                        </td>
                        <!-- <td>
                          {{workflowReAssignmentInfoForm.get('WorkflowItems').controls[i].get('LevelIndex').value }}
                        </td> -->
                        <td>
                          {{workflowReAssignmentInfoForm.get('WorkflowItems').controls[i].get('RoleName').value }}
                        </td>
                       
                      </tr>
                    </ng-template>
                  </p-table>
                </fieldset>
              </div>
            </div>

            <div class="row" style="margin-top: 20px">
              <div class="col-xl-12">
                <h4 class="form-heading" style="margin-bottom: 10px;">Pending Documents </h4>
              </div>
              <div class="col-xl-12 table-responsive" [ngStyle]="{'max-width.px': screenWidth}">
                <fieldset formArrayName="Documents">
                  <p-table [columns]="documentGridColumns" sortMode="single"
                    [value]="workflowReAssignmentInfoForm.get('Documents')['controls']">
                    <ng-template pTemplate="emptymessage">
                      <tr>
                        <td colspan="5" style='text-align: center;'>
                          <b>{{gridNoMessageToDisplay}}</b>
                        </td>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="colgroup" let-columns>
                      <colgroup>
                        <col style="width:10%;">
                        <col style="width:25%;">
                        <col style="width:25%;">
                        <col style="width:20%;">
                        <col style="width:20%;">
                      </colgroup>
                    </ng-template>
                    <ng-template pTemplate="header" let-columns>
                      <tr>
                        <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                          {{col.header}}
                          <p-sortIcon *ngIf='col.field!="SNo"' [field]="col.field" ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                        </th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-i="rowIndex" let-columns="columns">
                      <tr [formGroupName]="i">
                        <td>
                          {{ i + 1 }}
                        </td>
                        <td>
                          {{workflowReAssignmentInfoForm.get('Documents').controls[i].get('DocumentCode').value }}
                        </td>
                        <td>
                          {{workflowReAssignmentInfoForm.get('Documents').controls[i].get('ProcessName').value }}
                        </td>
                        <td>
                          {{workflowReAssignmentInfoForm.get('Documents').controls[i].get('WorkFlowStatus').value }}
                        </td>
                        <td>
                          {{workflowReAssignmentInfoForm.get('Documents').controls[i].get('CompanyName').value }}
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                </fieldset>
              </div>
            </div>
            <div class="row margin">
              <div class="col-12 error">
                {{formError}}
              </div>
            </div>

          </div>
          <div class="form-group text-right btn-list">
            <button type="submit" class="btn btn-save" [disabled]="disableSubmit" *ngIf="!isDisplayMode">
              <i class="fa fa-check" aria-hidden="true"></i> Submit</button>
            <button type="reset" (click)="onPDFPrint()" class="btn btn-edit" *ngIf="isDisplayMode">
              <i class="fa fa-print" aria-hidden="true"></i> Print</button>
            <button type="reset" (click)="resetData()" class="btn btn-cancel">
              <i class="fa fa-ban" aria-hidden="true"></i> Reset</button>

          </div>
          <p-confirmDialog></p-confirmDialog>
        </form>
      </div>
    </div>
  </div>
</div>
</div>

<ng-template #userTemplate let-r="result" let-t="term">
  {{ r.UserName }}
</ng-template>